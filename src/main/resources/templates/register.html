<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="ISO-8859-1">
    <title>Hospital Management System</title>
    <link rel="stylesheet"
          href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
          integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO"
          crossorigin="anonymous">
    <style>
        .error {
            border-color: red;
        }
        .error-message {
            color: red;
            font-size: 0.875em;
        }
    </style>
</head>
<body>
<div class="container">
    <h1>Hospital Management System</h1>
    <hr>
    <h2>Register Patient</h2>

    <form action="#" th:action="@{/add-patient}" th:object="${patient}"
          method="POST">
        <input type="text" th:field="*{name}" id="name" placeholder="Patient Name" class="form-control mb-4 col-4" required>
        <div id="nameError" class="error-message"></div>

        <input type="text" th:field="*{age}" id="age" placeholder="Age" class="form-control mb-4 col-4" required>
        <div id="ageError" class="error-message"></div>

        <select id="gender" th:field="*{gender}" class="form-control mb-4 col-4" required>
            <option value="" disabled selected>Select Gender</option>
            <option value="Male">Male</option>
            <option value="Female">Female</option>
        </select>
        <div id="genderError" class="error-message"></div>

        <input type="text" th:field="*{address}" id="address" placeholder="Address" class="form-control mb-4 col-4" required>
        <div id="addressError" class="error-message"></div>

        <input type="text" th:field="*{mobileNo}" id="mobileNo" placeholder="Mobile Number" class="form-control mb-4 col-4" required>
        <div id="mobileNoError" class="error-message"></div>

        <input type="text" th:field="*{consultation}" id="consultation" placeholder="Consultation" class="form-control mb-4 col-4">
        <div id="consultationError" class="error-message"></div>

        <button type="submit" class="btn btn-info col-2"> Register Patient</button>
    </form>

    <hr>

    <a th:href = "@{/patientList}"> Back to Patient List</a>
</div>

<script>
    document.getElementById('patientForm').addEventListener('submit', function(event) {
        event.preventDefault();

        let hasError = false;

        const fields = ['name', 'gender', 'mobileNo', 'age', 'address'];
        fields.forEach(function(field) {
            const input = document.getElementById(field);
            const errorDiv = document.getElementById(field + 'Error');

            if (!input.value) {
                input.classList.add('error');
                errorDiv.textContent = field.charAt(0).toUpperCase() + field.slice(1) + ' is required';
                hasError = true;
            } else {
                input.classList.remove('error');
                errorDiv.textContent = '';
            }
        });

        if (!hasError) {
            this.submit();
        }
    });
</script>
</body>
</html>
